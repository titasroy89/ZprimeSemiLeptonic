<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE JobConfiguration PUBLIC "" "JobConfig.dtd" [

<!ENTITY TargetLumi  "59830">
<!ENTITY PREFIX      "uhh2.AnalysisModuleRunner.">
<!ENTITY b_Cacheable "False">
<!ENTITY NEVT        "-1">

<!ENTITY IS_HOTVR            "false">
<!ENTITY IS_DEEPAK8          "true">
<!ENTITY IS_LOOSER_SELECTION "false">
<!ENTITY CHANNEL             "muon">
<!ENTITY OUTPUTdir           "/nfs/dust/cms/group/zprime-uhh/AnalysisQCD_NN_impl/&CHANNEL;/">

<!-- SingleMuon -->
                                                                                     
<!ENTITY DATA_SingleMuon_RunA_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/DATA_DATA_SingleMuon_RunA_UL18.xml">
<!ENTITY DATA_SingleMuon_RunB_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/DATA_DATA_SingleMuon_RunB_UL18.xml">
<!ENTITY DATA_SingleMuon_RunC_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/DATA_DATA_SingleMuon_RunC_UL18.xml">
<!ENTITY DATA_SingleMuon_RunD_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/DATA_DATA_SingleMuon_RunD_UL18.xml">
<!-- TTbar -->
<!ENTITY TTToSemiLeptonic_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_TTToSemiLeptonic_UL18.xml">
<!ENTITY TTToHadronic_UL18     SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_TTToHadronic_UL18.xml">
<!ENTITY TTTo2L2Nu_UL18        SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_TTTo2L2Nu_UL18.xml">
<!-- WJets -->
<!ENTITY WJetsToLNu_HT-70To100_UL18    SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WJetsToLNu_HT-70To100_UL18.xml">
<!ENTITY WJetsToLNu_HT-100To200_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WJetsToLNu_HT-100To200_UL18.xml">
<!ENTITY WJetsToLNu_HT-200To400_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WJetsToLNu_HT-200To400_UL18.xml">
<!ENTITY WJetsToLNu_HT-400To600_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WJetsToLNu_HT-400To600_UL18.xml">
<!ENTITY WJetsToLNu_HT-600To800_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WJetsToLNu_HT-600To800_UL18.xml">
<!ENTITY WJetsToLNu_HT-800To1200_UL18  SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WJetsToLNu_HT-800To1200_UL18.xml">
<!ENTITY WJetsToLNu_HT-1200To2500_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WJetsToLNu_HT-1200To2500_UL18.xml">
<!ENTITY WJetsToLNu_HT-2500ToInf_UL18  SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WJetsToLNu_HT-2500ToInf_UL18.xml">
<!-- DY -->
<!ENTITY DYJetsToLL_M-50_HT-70to100_UL18    SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_DYJetsToLL_M-50_HT-70to100_UL18.xml">
<!ENTITY DYJetsToLL_M-50_HT-100to200_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_DYJetsToLL_M-50_HT-100to200_UL18.xml">
<!ENTITY DYJetsToLL_M-50_HT-200to400_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_DYJetsToLL_M-50_HT-200to400_UL18.xml">
<!ENTITY DYJetsToLL_M-50_HT-400to600_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_DYJetsToLL_M-50_HT-400to600_UL18.xml">
<!ENTITY DYJetsToLL_M-50_HT-600to800_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_DYJetsToLL_M-50_HT-600to800_UL18.xml">
<!ENTITY DYJetsToLL_M-50_HT-800to1200_UL18  SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_DYJetsToLL_M-50_HT-800to1200_UL18.xml">
<!ENTITY DYJetsToLL_M-50_HT-1200to2500_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_DYJetsToLL_M-50_HT-1200to2500_UL18.xml">
<!ENTITY DYJetsToLL_M-50_HT-2500toInf_UL18  SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_DYJetsToLL_M-50_HT-2500toInf_UL18.xml">
<!-- Diboson -->
<!ENTITY WW_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WW_UL18.xml">
<!ENTITY WZ_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_WZ_UL18.xml">
<!ENTITY ZZ_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_ZZ_UL18.xml">
<!-- ST -->
<!ENTITY ST_tW_antitop_5f_NoFullyHadronicDecays_UL18  SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_ST_tW_antitop_5f_NoFullyHadronicDecays_UL18.xml">
<!ENTITY ST_tW_top_5f_NoFullyHadronicDecays_UL18      SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_ST_tW_top_5f_NoFullyHadronicDecays_UL18.xml">
<!ENTITY ST_t-channel_antitop_4f_InclusiveDecays_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_ST_t-channel_antitop_4f_InclusiveDecays_UL18.xml">
<!ENTITY ST_t-channel_top_4f_InclusiveDecays_UL18     SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_ST_t-channel_top_4f_InclusiveDecays_UL18.xml">
<!ENTITY ST_s-channel_4f_leptonDecays_UL18            SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_ST_s-channel_4f_leptonDecays_UL18.xml">
<!-- QCD -->
<!ENTITY QCD_HT50to100_UL18    SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_QCD_HT50to100_UL18.xml">
<!ENTITY QCD_HT100to200_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_QCD_HT100to200_UL18.xml">
<!ENTITY QCD_HT200to300_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_QCD_HT200to300_UL18.xml">
<!ENTITY QCD_HT300to500_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_QCD_HT300to500_UL18.xml">
<!ENTITY QCD_HT500to700_UL18   SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_QCD_HT500to700_UL18.xml">
<!ENTITY QCD_HT700to1000_UL18  SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_QCD_HT700to1000_UL18.xml">
<!ENTITY QCD_HT1000to1500_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_QCD_HT1000to1500_UL18.xml">
<!ENTITY QCD_HT1500to2000_UL18 SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_QCD_HT1500to2000_UL18.xml">
<!ENTITY QCD_HT2000toInf_UL18  SYSTEM "../data/Skimming_datasets_UL18_mu_NNimpl/MC_QCD_HT2000toInf_UL18.xml">
]>

<!--
     <ConfigParse NEventsBreak="0" LastBreak="0" FileSplit="1" AutoResubmit="0"/>
<ConfigSGE RAM="2" DISK="2" Mail="titasroy@uic.edu" Notification="as" Workdir="workdir_Zprime_Analysis_implDNN_UL18_muon"/>
-->

<JobConfiguration JobName="ZprimePreselectionJob" OutputLevel="INFO">
	<Library Name="libSUHH2ZprimeSemiLeptonic"/>
	<Package Name="SUHH2ZprimeSemiLeptonic.par"/>

	<Cycle Name="uhh2::AnalysisModuleRunner" OutputDirectory="&OUTPUTdir;/" PostFix="" TargetLumi="&TargetLumi;">

		<!-- SingleMuon -->
<!--		<InputData Lumi="1" NEventsMax="&NEVT;" Type="DATA" Version="DATA_SingleMuon_RunA_UL18_blinded" Cacheable="&b_Cacheable;">
     					&DATA_SingleMuon_RunA_UL18;
			<InputTree Name="AnalysisTree" />
			<OutputTree Name="AnalysisTree" />
		</InputData>
		<InputData Lumi="1" NEventsMax="&NEVT;" Type="DATA" Version="DATA_SingleMuon_RunB_UL18_blinded" Cacheable="&b_Cacheable;">
			&DATA_SingleMuon_RunB_UL18;
			<InputTree Name="AnalysisTree" />
			<OutputTree Name="AnalysisTree" />
		</InputData>
		<InputData Lumi="1" NEventsMax="&NEVT;" Type="DATA" Version="DATA_SingleMuon_RunC_UL18_blinded" Cacheable="&b_Cacheable;">
			&DATA_SingleMuon_RunC_UL18;
			<InputTree Name="AnalysisTree" />
			<OutputTree Name="AnalysisTree" />
		</InputData>
		<InputData Lumi="1" NEventsMax="&NEVT;" Type="DATA" Version="DATA_SingleMuon_RunD_UL18_blinded" Cacheable="&b_Cacheable;">
			&DATA_SingleMuon_RunD_UL18;
			<InputTree Name="AnalysisTree" />
			<OutputTree Name="AnalysisTree" />
		</InputData>-->
		<!-- TTbar -->
		<InputData Lumi="395620274.2531324" NEventsMax="&NEVT;" Type="MC" Version="TTToSemiLeptonic_UL18" Cacheable="&b_Cacheable;">
			&TTToSemiLeptonic_UL18;
			<InputTree Name="AnalysisTree" />
			<OutputTree Name="AnalysisTree" />
		</InputData>
		<!-- ST -->

		<UserConfig>
			<Item Name="PrimaryVertexCollection" Value="offlineSlimmedPrimaryVertices"/>
			<Item Name="GenParticleCollection"   Value="GenParticles"/>
			<Item Name="ElectronCollection"      Value="slimmedElectronsUSER"/>
			<Item Name="MuonCollection"          Value="slimmedMuonsUSER"/>
			<Item Name="JetCollection"           Value="jetsAk4Puppi"/>
			<Item Name="GenJetCollection"        Value="slimmedGenJets"/>
			<Item Name="TopJetCollection"        Value="hotvrPuppi"/>
			<Item Name="GenTopJetCollection"     Value="genjetsAk8SubstructureSoftDrop"/>
			<Item Name="TopPuppiJetCollection"   Value="jetsAk8PuppiSubstructure_SoftDropPuppi"/>
			<Item Name="METName"                 Value="slimmedMETsPuppi"/>
			<Item Name="genMETName"              Value="slimmedMETs_GenMET"/>

			<Item Name="lumi_file"              Value="/nfs/dust/cms/user/jabuschh/uhh2-106X_v2/CMSSW_10_6_28/src/UHH2/common/UHH2-data/UL18/Cert_314472-325175_13TeV_Legacy2018_Collisions18_JSON_normtag.root"/>
			<Item Name="lumihists_lumi_per_bin" Value="500.0"/>

			<Item Name="pileup_directory"           Value="/nfs/dust/cms/user/jabuschh/uhh2-106X_v2/CMSSW_10_6_28/src/UHH2/common/UHH2-data/UL18/MyMCPileupHistogram_UL18.root"/>
			<Item Name="pileup_directory_data"      Value="/nfs/dust/cms/user/jabuschh/uhh2-106X_v2/CMSSW_10_6_28/src/UHH2/common/UHH2-data/UL18/MyDataPileupHistogram_UL18.root"/>
			<Item Name="pileup_directory_data_up"   Value="/nfs/dust/cms/user/jabuschh/uhh2-106X_v2/CMSSW_10_6_28/src/UHH2/common/UHH2-data/UL18/MyDataPileupHistogram_UL18_72383.root"/>
			<Item Name="pileup_directory_data_down" Value="/nfs/dust/cms/user/jabuschh/uhh2-106X_v2/CMSSW_10_6_28/src/UHH2/common/UHH2-data/UL18/MyDataPileupHistogram_UL18_66017.root"/>

			<Item Name="BTagCalibration" Value = "/nfs/dust/cms/user/jabuschh/uhh2-106X_v2/CMSSW_10_6_28/src/UHH2/common/UHH2-data/btagging_SFs_UL/UL18/reshaping_deepJet_v2.csv"/>
			<!-- add DeepAK8 top tag SF -->

			<Item Name="NLOCorrections" Value = "/nfs/dust/cms/user/jabuschh/uhh2-106X_v2/CMSSW_10_6_28/src/UHH2/ZprimeSemiLeptonic/data/"/>

			<Item Name="is_hotvr" Value="&IS_HOTVR;"/>
			<Item Name="is_deepAK8" Value="&IS_DEEPAK8;"/>
			<Item Name="is_looser_selection" Value="&IS_LOOSER_SELECTION;"/>

		<!--	<Item Name="additionalBranches" Value="jetsAk4CHS CHS_matched hotvrGen
		     					Ak4_j1_E Ak4_j1_eta Ak4_j1_m Ak4_j1_phi Ak4_j1_pt Ak4_j1_deepjetbscore
				Ak4_j2_E Ak4_j2_eta Ak4_j2_m Ak4_j2_phi Ak4_j2_pt Ak4_j2_deepjetbscore
				Ak4_j3_E Ak4_j3_eta Ak4_j3_m Ak4_j3_phi Ak4_j3_pt Ak4_j3_deepjetbscore
				Ak4_j4_E Ak4_j4_eta Ak4_j4_m Ak4_j4_phi Ak4_j4_pt Ak4_j4_deepjetbscore
				Ak4_j5_E Ak4_j5_eta Ak4_j5_m Ak4_j5_phi Ak4_j5_pt Ak4_j5_deepjetbscore
				Ak4_j6_E Ak4_j6_eta Ak4_j6_m Ak4_j6_phi Ak4_j6_pt Ak4_j6_deepjetbscore
				Ak8_j1_E Ak8_j1_eta Ak8_j1_mSD Ak8_j1_phi Ak8_j1_pt Ak8_j1_tau21 Ak8_j1_tau32
				Ak8_j2_E Ak8_j2_eta Ak8_j2_mSD Ak8_j2_phi Ak8_j2_pt Ak8_j2_tau21 Ak8_j2_tau32
				Ak8_j3_E Ak8_j3_eta Ak8_j3_mSD Ak8_j3_phi Ak8_j3_pt Ak8_j3_tau21 Ak8_j3_tau32
				MET_phi MET_pt
				Mu_E Mu_eta Mu_phi Mu_pt
				N_Ak4 N_Ak8" />-->
                      <Item Name="additionalBranches" Value="CHS_matched  dR_mu_jet deepjetbscore_jet deepjetbscore_jet1 deepjetbscore_jet2 deepjetbscore_jet3
                                             dphi_jet1_MET dphi_mu_MET 
                                             eta_jet eta_jet1 eta_jet2 eta_jet3 eta_mu Invmass_jet Invmass_jet1 Invmass_jet2 Invmass_jet3 InvMET 
                                             phi_jet phi_jet1 phi_jet2 phi_jet3 phi_mu
                                             Invpt_jet1 Invpt_jet2 Invpt_jet3 ptrel_mu_jet reliso_mu InvS11 InvS12 InvS13 InvS22 InvS23 InvS33 InvST"/> 


				<Item Name="use_sframe_weight"           Value="false"/>
				<Item Name="jersmear_direction"          Value="nominal"/>
				<Item Name="jecsmear_direction"          Value="nominal"/>
				<Item Name="ScaleVariationMuR"           Value="nominal"/>
				<Item Name="ScaleVariationMuF"           Value="nominal"/>
				<Item Name="SystDirection_MuonId"        Value="nominal"/>
				<Item Name="SystDirection_MuonIso"       Value="nominal"/>
				<Item Name="SystDirection_MuonTrigger"   Value="nominal"/>
				<Item Name="SystDirection_ElectronId"    Value="nominal"/>
				<Item Name="SystDirection_ElectronReco"  Value="nominal"/>
				<Item Name="Sys_PU"                      Value="central"/>
				<Item Name="SystDirection_BTaggingShape" Value="central"/>
				<Item Name="Sys_prefiring"               Value="nominal"/>
				<Item Name="Sys_TopTag"                  Value="nominal"/>
				<Item Name="Systematic_TopPt_a"          Value="nominal"/>
				<Item Name="Systematic_TopPt_b"          Value="nominal"/>
				<Item Name="channel"                     Value="&CHANNEL;"/>

				<Item Name="AnalysisModule" Value="ZprimeAnalysisModule_NNimplement"/>
			</UserConfig>

		</Cycle>
	</JobConfiguration>
